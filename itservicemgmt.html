<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0f172a">
<title>InfoMgmt: IT-Serivemanagement</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">

<style>
:root { --bg: #0f172a; --panel: #1e293b; --text: #f1f5f9; --muted: #94a3b8; --accent: #3b82f6; --success: #22c55e; --error: #ef4444; --border: rgba(255,255,255,0.1); --warning: #f59e0b; }
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin:0; font-family:-apple-system, system-ui, sans-serif; background:var(--bg); color:var(--text); height:100vh; display:flex; flex-direction:column; overflow:hidden; }
.wrap { width:100%; max-width:850px; margin:0 auto; padding:20px; padding-bottom:100px; flex:1; display:flex; flex-direction:column; position:relative; }
.scroll-wrap { overflow-y:auto; flex:1; -webkit-overflow-scrolling: touch; }
.hidden { display:none !important; }
.btn { border:none; padding:16px 24px; border-radius:12px; font-weight:bold; cursor:pointer; font-size:1.1rem; color:white; transition:0.2s; display:inline-flex; align-items:center; justify-content:center; gap:8px; touch-action: manipulation; }
.btn-primary { background:var(--accent); box-shadow:0 4px 12px rgba(59,130,246,0.3); }
.btn-outline { background:transparent; border:1px solid var(--border); color:var(--muted); font-size:0.9rem; padding:10px 16px; }
.btn-block { width:100%; }
#start-screen { text-align:center; }
.mode-card { background:var(--panel); border:1px solid var(--border); padding:12px 16px; border-radius:16px; margin-bottom:15px; text-align:left; cursor:pointer; transition:0.2s; display:flex; justify-content:space-between; align-items:center; }
.mode-card:active { background:rgba(255,255,255,0.05); }
.tag { font-size:0.75rem; padding:4px 8px; border-radius:6px; background:rgba(255,255,255,0.1); font-weight:bold; }
.top-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; font-size:0.9rem; color:var(--muted); }
.streak-box { color:var(--accent); font-weight:bold; font-size:1.1rem; }
.progress-track { height:8px; background:rgba(255,255,255,0.1); border-radius:4px; overflow:hidden; margin-bottom:20px; }
.progress-fill { height:100%; background:var(--accent); width:0%; transition:width 0.3s; }
.card { background:var(--panel); border:1px solid var(--border); border-radius:20px; padding:25px; display:flex; flex-direction:column; gap:20px; box-shadow:0 10px 30px rgba(0,0,0,0.3); margin-bottom:20px; }
.q-meta { font-size:11px; text-transform:uppercase; letter-spacing:1px; color:var(--muted); font-weight:bold; }
.q-text { font-size:1.35rem; line-height:1.45; font-weight:700; }
.opt-grid { display:grid; gap:12px; }
.opt-btn { background:rgba(255,255,255,0.05); border:1px solid var(--border); padding:18px; border-radius:12px; color:var(--text); text-align:left; cursor:pointer; transition:0.1s; display:flex; align-items:center; min-height:60px; }
.opt-btn.correct { background:rgba(34,197,94,0.15); border-color:var(--success); color:var(--success); }
.opt-btn.wrong { background:rgba(239,68,68,0.15); border-color:var(--error); color:var(--error); opacity:0.6; }
.expl-box { padding:15px; border-radius:12px; display:none; animation:fadeIn 0.3s; font-size:0.95rem; line-height:1.5; border-left:4px solid transparent; background:rgba(0,0,0,0.2); }
.expl-box.is-correct { border-left-color:var(--success); display:block; }
.exam-item { background:var(--panel); padding:20px; border-radius:12px; border:1px solid var(--border); margin-bottom:15px; }
.exam-q { font-size:1.1rem; font-weight:600; margin-bottom:10px; }
.learn-a { color:var(--success); font-weight:bold; margin-bottom:5px; }
@keyframes fadeIn { from { opacity:0; transform:translateY(5px); } to { opacity:1; transform:translateY(0); } }
html, body{
  scrollbar-width: none;
  -ms-overflow-style: none;
}

html::-webkit-scrollbar,
body::-webkit-scrollbar{
  width: 0;
  height: 0;
  display: none;
}

</style>
</head>
<body>

<div id="start-screen" class="wrap scroll-wrap">
    <div style="margin:40px 0; text-align:center;">
        <div style="font-size:3rem; margin-bottom:10px;">üõ°Ô∏è</div>
        <h1>IT-Servicemanagement</h1>
        <p style="color:var(--muted)">Datenschutz, Krypto & Abstrahlsicherheit</p>
    </div>
    <div class="mode-card" onclick="initLearnMode()">
        <div><h3>üìñ Lernmodus</h3><div style="color:var(--muted); font-size:0.85rem; margin-top:5px;">Fragen & L√∂sungen studieren</div></div>
        <div class="tag" style="background:var(--success)">LERNEN</div>
    </div>
    <div class="mode-card" onclick="initTrainer('ALL')">
        <div><h3>üöÄ Speed-Trainer</h3><div style="color:var(--muted); font-size:0.85rem; margin-top:5px;">Training ‚Ä¢ Sofort-Feedback</div></div>
        <div class="tag" style="background:var(--accent)">√úBEN</div>
    </div>
    <div class="mode-card" onclick="initExam()">
        <div><h3>üìù Pr√ºfungssimulation</h3><div style="color:var(--muted); font-size:0.85rem; margin-top:5px;">Alle Themen ‚Ä¢ 45 Fragen</div></div>
        <div class="tag" style="background:var(--warning); color:#000;">TEST</div>
    </div>
    <h3 style="margin-top:30px; border-bottom:1px solid var(--border); padding-bottom:10px;">Themen-Filter</h3>
    <div id="module-list" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
</div>

<div id="trainer-screen" class="wrap scroll-wrap hidden">
    <div class="top-bar">
        <button class="btn btn-outline" onclick="window.location.href='index.html'">Beenden</button>
        <div class="streak-box">üî• <span id="t-streak">0</span></div>
    </div>
    <div class="progress-track"><div id="t-progress" class="progress-fill"></div></div>
    <div class="card">
        <div class="q-meta"><span id="t-mod">MODUL</span> ‚Ä¢ <span id="t-idx">1/10</span></div>
        <div class="q-text" id="t-question"></div>
        <div class="opt-grid" id="t-options"></div>
        <div id="t-expl" class="expl-box">
            <span style="font-weight:bold; display:block; margin-bottom:5px;" id="t-expl-title"></span>
            <span id="t-expl-text"></span>
        </div>
    </div>
    <button id="next-btn" class="btn btn-primary btn-block" style="display:none; margin-bottom:30px;" onclick="nextCard()">N√§chste Frage ‚ûî</button>
</div>

<div id="learn-screen" class="wrap scroll-wrap hidden">
    <div class="top-bar">
        <button class="btn btn-outline" onclick="window.location.href='index.html'">Zur√ºck</button>
        <div>Lernmodus InfoSi</div>
    </div>
    <div id="learn-list"></div>
</div>

<div id="exam-screen" class="wrap scroll-wrap hidden">
    <div class="top-bar">
        <button class="btn btn-outline" onclick="if(confirm('Abbrechen?')) window.location.href='index.html'">Abbrechen</button>
        <div>Pr√ºfungssimulation</div>
    </div>
    <div id="exam-result-header" class="hidden"></div>
    <div id="exam-list"></div>
    <button id="btn-submit-exam" class="btn btn-primary btn-block" onclick="submitExam()">Pr√ºfung abgeben</button>
</div>

<script>

const BANK = [
    // --- GRUNDLAGEN ---
   { q: "Welches Framework dient der Bundeswehr als Best-Practice-Grundlage f√ºr ihr IT-Service-Management?", a: "ITIL", e: "ITIL stellt international anerkannte Best Practices f√ºr das IT-Service-Management bereit und dient der Bundeswehr als Orientierungsrahmen.", o: ["COBIT", "ITIL", "ISO 27001", "PRINCE2"], m: "GRUNDLAGEN" },
   { q: "Wie wird ITIL innerhalb der Bundeswehr typischerweise bezeichnet?", a: "IT-Service-Management-Framework", e: "Die Bundeswehr nutzt ITIL nicht als Markenbegriff, sondern spricht meist von einem ITSM-Framework oder harmonisiertem Servicemanagement.", o: ["ITIL-Abteilung", "IT-Service-Management-Framework", "NATO-IT-Prozess", "IT-Grundschutz"], m: "GRUNDLAGEN" },
   { q: "Welche Organisation ist zentral f√ºr den IT-Betrieb der Bundeswehr verantwortlich?", a: "BWI GmbH", e: "Die BWI GmbH ist der zentrale IT-Dienstleister der Bundeswehr und setzt ITSM-Prozesse nach ITIL-Prinzipien um.", o: ["BSI", "BWI GmbH", "BAAINBw", "Bundesamt f√ºr Sicherheit"], m: "BUNDESWEHR" },
   { q: "Welcher ITIL-Prozess befasst sich prim√§r mit der schnellstm√∂glichen Wiederherstellung eines IT-Services?", a: "Incident Management", e: "Incident Management zielt darauf ab, St√∂rungen so schnell wie m√∂glich zu beheben und den Servicebetrieb wiederherzustellen.", o: ["Problem Management", "Change Management", "Incident Management", "Service Level Management"], m: "PROZESSE" },
   { q: "Welcher ITIL-Prozess analysiert wiederkehrende St√∂rungen und ihre Ursachen?", a: "Problem Management", e: "Problem Management identifiziert Root Causes, um zuk√ºnftige Incidents zu vermeiden.", o: ["Incident Management", "Change Management", "Problem Management", "Release Management"], m: "PROZESSE" },
   { q: "Welcher Prozess stellt sicher, dass √Ñnderungen an IT-Services kontrolliert und dokumentiert erfolgen?", a: "Change Management", e: "Change Management minimiert Risiken, indem √Ñnderungen geplant, bewertet und freigegeben werden.", o: ["Configuration Management", "Incident Management", "Change Management", "Capacity Management"], m: "PROZESSE" },
   { q: "Was ist das Hauptziel eines harmonisierten IT-Service-Managements in der Bundeswehr?", a: "Einheitliche und transparente IT-Prozesse", e: "Durch Harmonisierung sollen alle IT-Services nach gleichen Regeln betrieben und gesteuert werden.", o: ["Kostenreduktion", "Einheitliche und transparente IT-Prozesse", "Maximale Automatisierung", "Abschaffung von ITIL"], m: "BUNDESWEHR" },
   { q: "Welche Rolle spielt eine zentrale ITSM-Plattform bei der Bundeswehr?", a: "Abbildung und Steuerung aller ITSM-Prozesse", e: "Die zentrale Plattform b√ºndelt Incident-, Change- und Service-Prozesse in einem einheitlichen System.", o: ["Ersatz f√ºr das Intranet", "Abbildung und Steuerung aller ITSM-Prozesse", "Ausschlie√üliches Ticket-System", "Dokumentenarchiv"], m: "BUNDESWEHR" },
   { q: "Welcher Begriff beschreibt einen formalen Antrag eines Nutzers auf eine standardisierte Leistung?", a: "Service Request", e: "Service Requests sind standardisierte Anforderungen, z. B. Softwarebestellungen oder Benutzerantr√§ge.", o: ["Incident", "Problem", "Service Request", "Change"], m: "GRUNDLAGEN" },
   { q: "Warum wird ITIL in der Bundeswehr an milit√§rische Anforderungen angepasst?", a: "Weil Einsatzszenarien besondere Anforderungen an Verf√ºgbarkeit und Sicherheit stellen", e: "Milit√§rische Eins√§tze erfordern robuste, sichere und hochverf√ºgbare IT-Services.", o: ["Weil ITIL veraltet ist", "Weil zivile IT nicht geeignet ist", "Weil Einsatzszenarien besondere Anforderungen an Verf√ºgbarkeit und Sicherheit stellen", "Weil NATO-Vorgaben dies verbieten"], m: "BUNDESWEHR" },
    // --- Service-Stategy
   { q: "Welche ITIL-V3-Lifecycle-Phase definiert den gesch√§ftlichen Nutzen von IT-Services?", a: "Service Strategy", e: "In der Service Strategy wird festgelegt, welchen Mehrwert IT-Services f√ºr die Organisation liefern.", o: ["Service Design", "Service Transition", "Service Strategy", "Service Operation"], m: "SERVICE STRATEGY" },
   { q: "Welches Konzept beschreibt in ITIL V3 den durch einen Service geschaffenen Nutzen?", a: "Value", e: "Value entsteht durch die Kombination aus Utility (Nutzen) und Warranty (Gew√§hrleistung).", o: ["Capability", "Resource", "Value", "Asset"], m: "SERVICE STRATEGY" },
   { q: "Was beschreibt der Begriff 'Utility' im ITIL-Kontext?", a: "Was ein Service leistet", e: "Utility beschreibt die Funktionalit√§t eines Services ‚Äì also das 'Fit for Purpose'.", o: ["Wie zuverl√§ssig ein Service ist", "Was ein Service leistet", "Wie sicher ein Service ist", "Wie g√ºnstig ein Service ist"], m: "SERVICE STRATEGY" },
   { q: "Was beschreibt der Begriff 'Warranty' im ITIL-Kontext?", a: "Wie ein Service bereitgestellt wird", e: "Warranty beschreibt die Qualit√§t der Bereitstellung, z. B. Verf√ºgbarkeit, Kapazit√§t und Sicherheit.", o: ["Was ein Service leistet", "Wie ein Service bereitgestellt wird", "Wer den Service betreibt", "Welche Kosten entstehen"], m: "SERVICE STRATEGY" },
   { q: "Warum ist die Service Strategy f√ºr die Bundeswehr besonders relevant?", a: "Weil IT-Services missionskritische F√§higkeiten unterst√ºtzen", e: "IT-Services der Bundeswehr m√ºssen direkt zur Auftragserf√ºllung beitragen.", o: ["Weil sie Kosten minimiert", "Weil sie nur f√ºr zivile IT gilt", "Weil IT-Services missionskritische F√§higkeiten unterst√ºtzen", "Weil sie ausschlie√ülich wirtschaftliche Ziele verfolgt"], m: "SERVICE STRATEGY" },
    // --- Service-Design
   { q: "Welche Lifecycle-Phase ist f√ºr das Design neuer oder ge√§nderter IT-Services verantwortlich?", a: "Service Design", e: "Service Design definiert Architektur, Prozesse, SLAs und Sicherheitsanforderungen.", o: ["Service Strategy", "Service Design", "Service Transition", "Continual Service Improvement"], m: "SERVICE DESIGN" },
   { q: "Welches Dokument beschreibt vereinbarte Servicequalit√§ten wie Verf√ºgbarkeit oder Reaktionszeiten?", a: "Service Level Agreement", e: "SLAs definieren messbare Qualit√§tsmerkmale zwischen Service Provider und Kunde.", o: ["OLA", "UC", "Service Level Agreement", "Service Catalogue"], m: "SERVICE DESIGN" },
   { q: "Welche Rolle spielt Informationssicherheit im Service Design der Bundeswehr?", a: "Sie ist integraler Bestandteil jedes Service-Designs", e: "Aufgrund milit√§rischer Anforderungen ist Sicherheit kein optionaler Aspekt.", o: ["Sie wird erst im Betrieb betrachtet", "Sie ist integraler Bestandteil jedes Service-Designs", "Sie betrifft nur Netze", "Sie ist Aufgabe externer Stellen"], m: "SERVICE DESIGN" },
   { q: "Welche ITIL-Funktion stellt sicher, dass Services ausreichend verf√ºgbar sind?", a: "Availability Management", e: "Availability Management plant und √ºberwacht die vereinbarte Serviceverf√ºgbarkeit.", o: ["Capacity Management", "Availability Management", "IT Service Continuity Management", "Incident Management"], m: "SERVICE DESIGN" },
   { q: "Warum ist Service Design f√ºr einsatznahe IT der Bundeswehr kritisch?", a: "Weil Fehler im Design im Einsatz kaum korrigierbar sind", e: "Im Einsatz sind √Ñnderungen oft nicht oder nur eingeschr√§nkt m√∂glich.", o: ["Weil Design Kosten verursacht", "Weil Fehler im Design im Einsatz kaum korrigierbar sind", "Weil Design nur dokumentiert", "Weil es nur theoretisch ist"], m: "SERVICE DESIGN" },
    // --- Service-Transition
   { q: "Welche Phase √ºberf√ºhrt neue oder ge√§nderte Services in den operativen Betrieb?", a: "Service Transition", e: "Service Transition stellt sicher, dass √Ñnderungen kontrolliert und stabil live gehen.", o: ["Service Strategy", "Service Design", "Service Transition", "Service Operation"], m: "SERVICE TRANSITION" },
   { q: "Welcher Prozess bewertet, genehmigt und steuert √Ñnderungen?", a: "Change Management", e: "Change Management minimiert Risiken durch strukturierte Entscheidungsprozesse.", o: ["Release Management", "Change Management", "Incident Management", "Configuration Management"], m: "SERVICE TRANSITION" },
   { q: "Was ist das Ziel des Configuration Managements (SACM)?", a: "Transparenz √ºber IT-Komponenten und ihre Beziehungen", e: "SACM verwaltet Configuration Items und deren Abh√§ngigkeiten.", o: ["Kostenkontrolle", "Transparenz √ºber IT-Komponenten und ihre Beziehungen", "St√∂rungsbeseitigung", "Benutzerverwaltung"], m: "SERVICE TRANSITION" },
   { q: "Warum ist kontrollierte Transition bei der Bundeswehr besonders wichtig?", a: "Weil unkontrollierte √Ñnderungen Einsatzf√§higkeit gef√§hrden k√∂nnen", e: "Fehlerhafte √Ñnderungen k√∂nnen missionskritische Systeme beeintr√§chtigen.", o: ["Weil sie Zeit spart", "Weil unkontrollierte √Ñnderungen Einsatzf√§higkeit gef√§hrden k√∂nnen", "Weil sie nur dokumentiert", "Weil sie gesetzlich vorgeschrieben ist"], m: "SERVICE TRANSITION" },
    // --- Service-Operation
   { q: "Welche Phase stellt den t√§glichen Betrieb der IT-Services sicher?", a: "Service Operation", e: "Service Operation gew√§hrleistet stabile Services im Tagesgesch√§ft.", o: ["Service Design", "Service Transition", "Service Operation", "CSI"], m: "SERVICE OPERATION" },
   { q: "Welcher Prozess reagiert auf ungeplante Serviceunterbrechungen?", a: "Incident Management", e: "Incident Management stellt Services schnellstm√∂glich wieder her.", o: ["Problem Management", "Change Management", "Incident Management", "Release Management"], m: "SERVICE OPERATION" },
   { q: "Was ist der Unterschied zwischen Incident und Problem?", a: "Ein Problem ist die Ursache eines oder mehrerer Incidents", e: "Incidents sind Symptome, Problems die zugrunde liegenden Ursachen.", o: ["Incidents sind schwerwiegender", "Problems sind St√∂rungen", "Ein Problem ist die Ursache eines oder mehrerer Incidents", "Es gibt keinen Unterschied"], m: "SERVICE OPERATION" },
   { q: "Warum ist Service Operation im milit√§rischen Kontext besonders anspruchsvoll?", a: "Weil Services auch unter Einsatzbedingungen stabil laufen m√ºssen", e: "IT-Services m√ºssen unabh√§ngig von Ort und Lage verf√ºgbar sein.", o: ["Weil sie teuer ist", "Weil sie manuell erfolgt", "Weil Services auch unter Einsatzbedingungen stabil laufen m√ºssen", "Weil sie ausgelagert ist"], m: "SERVICE OPERATION" },
    // Continual-Service-Improval
   { q: "Welche Lifecycle-Phase fokussiert die kontinuierliche Verbesserung von Services?", a: "Continual Service Improvement", e: "CSI bewertet Services anhand von KPIs und Optimierungspotenzialen.", o: ["Service Strategy", "Service Design", "Service Operation", "Continual Service Improvement"], m: "CSI" },
   { q: "Welches Modell wird in ITIL V3 zur kontinuierlichen Verbesserung genutzt?", a: "PDCA-Zyklus", e: "Der Plan-Do-Check-Act-Zyklus ist Grundlage f√ºr Verbesserungsprozesse.", o: ["OSI-Modell", "PDCA-Zyklus", "Wasserfallmodell", "V-Modell"], m: "CSI" },
   { q: "Warum ist CSI f√ºr die Bundeswehr relevant?", a: "Weil sich Bedrohungslagen und Anforderungen kontinuierlich √§ndern", e: "IT-Services m√ºssen an neue sicherheits- und einsatzbezogene Anforderungen angepasst werden.", o: ["Weil CSI Kosten senkt", "Weil ITIL dies fordert", "Weil sich Bedrohungslagen und Anforderungen kontinuierlich √§ndern", "Weil es automatisiert ist"], m: "CSI" },
    // --- Weitere Fragen
   { q: "Welche Lifecycle-Phase legt fest, welche IT-Services angeboten werden sollen?", a: "Service Strategy", e: "In der Service Strategy wird entschieden, welche Services Mehrwert f√ºr die Organisation liefern.", o: ["Service Design", "Service Strategy", "Service Transition", "Service Operation"], m: "SERVICE STRATEGY" },
   { q: "Was bezeichnet ITIL V3 als Ressourcen eines Service Providers?", a: "Kapazit√§ten wie Personal, Infrastruktur und Budget", e: "Ressourcen sind die Mittel, mit denen Services bereitgestellt werden.", o: ["Gesch√§ftsprozesse", "Kapazit√§ten wie Personal, Infrastruktur und Budget", "Service Level Agreements", "Incidents"], m: "SERVICE STRATEGY" },
   { q: "Was sind Capabilities im Sinne von ITIL V3?", a: "F√§higkeiten zur effektiven Nutzung von Ressourcen", e: "Capabilities beschreiben das Wissen, die Organisation und die Prozesse eines Service Providers.", o: ["Technische Komponenten", "F√§higkeiten zur effektiven Nutzung von Ressourcen", "Servicekataloge", "Vertr√§ge"], m: "SERVICE STRATEGY" },

   { q: "Welche Lifecycle-Phase entwirft Prozesse, Architekturen und Sicherheitsma√ünahmen?", a: "Service Design", e: "Service Design definiert, wie ein Service technisch und organisatorisch umgesetzt wird.", o: ["Service Strategy", "Service Design", "Service Transition", "CSI"], m: "SERVICE DESIGN" },
   { q: "Was ist der Zweck des Servicekatalogs?", a: "√úbersicht aller verf√ºgbaren IT-Services", e: "Der Servicekatalog beschreibt verst√§ndlich alle angebotenen Services.", o: ["Dokumentation von Incidents", "√úbersicht aller verf√ºgbaren IT-Services", "Verwaltung von Changes", "Kostenrechnung"], m: "SERVICE DESIGN" },
   { q: "Welche Management-Disziplin stellt die Wiederanlaufpl√§ne nach schweren Ausf√§llen sicher?", a: "IT Service Continuity Management", e: "ITSCM sorgt daf√ºr, dass Services nach Katastrophen wiederhergestellt werden k√∂nnen.", o: ["Availability Management", "Capacity Management", "IT Service Continuity Management", "Incident Management"], m: "SERVICE DESIGN" },

   { q: "Welche Lifecycle-Phase stellt sicher, dass neue Services getestet und dokumentiert sind?", a: "Service Transition", e: "Service Transition stellt die kontrollierte √úberf√ºhrung in den Betrieb sicher.", o: ["Service Strategy", "Service Design", "Service Transition", "Service Operation"], m: "SERVICE TRANSITION" },
   { q: "Was ist ein Configuration Item (CI)?", a: "Eine verwaltete Komponente eines IT-Services", e: "CIs sind alle Elemente, die zur Bereitstellung eines Services erforderlich sind.", o: ["Ein Incident", "Eine verwaltete Komponente eines IT-Services", "Ein Benutzerkonto", "Ein SLA"], m: "SERVICE TRANSITION" },
   { q: "Welches Repository enth√§lt Informationen √ºber Configuration Items?", a: "CMDB", e: "Die Configuration Management Database speichert Details und Beziehungen von CIs.", o: ["KEDB", "CMDB", "Servicekatalog", "Incident-Register"], m: "SERVICE TRANSITION" },

   { q: "Welche Lifecycle-Phase ist f√ºr das Monitoring von IT-Services zust√§ndig?", a: "Service Operation", e: "Service Operation √ºberwacht und steuert den laufenden IT-Betrieb.", o: ["Service Design", "Service Transition", "Service Operation", "CSI"], m: "SERVICE OPERATION" },
   { q: "Welcher Prozess stellt Workarounds f√ºr bekannte Fehler bereit?", a: "Problem Management", e: "Problem Management dokumentiert bekannte Fehler und m√∂gliche Umgehungsl√∂sungen.", o: ["Incident Management", "Change Management", "Problem Management", "Release Management"], m: "SERVICE OPERATION" },
   { q: "Was ist das Hauptziel des Request Fulfillment?", a: "Standardisierte Bearbeitung von Serviceanfragen", e: "Service Requests unterscheiden sich von Incidents durch ihren planbaren Charakter.", o: ["St√∂rungsbehebung", "Ursachenanalyse", "Standardisierte Bearbeitung von Serviceanfragen", "√Ñnderungsfreigabe"], m: "SERVICE OPERATION" },

   { q: "Welche Lifecycle-Phase nutzt Kennzahlen zur Bewertung der Servicequalit√§t?", a: "Continual Service Improvement", e: "CSI bewertet Services anhand von KPIs und Messgr√∂√üen.", o: ["Service Strategy", "Service Design", "Service Operation", "Continual Service Improvement"], m: "CSI" },
   { q: "Was ist ein KPI im ITIL-Kontext?", a: "Eine messbare Kennzahl zur Leistungsbewertung", e: "KPIs dienen der objektiven Bewertung von Services und Prozessen.", o: ["Ein Vertrag", "Ein Incident", "Eine messbare Kennzahl zur Leistungsbewertung", "Ein Audit"], m: "CSI" },
   { q: "Welche Frage geh√∂rt zum 7-Step-Improvement-Prozess von ITIL V3?", a: "Was soll gemessen werden?", e: "Der 7-Step-Improvement-Prozess definiert strukturierte Verbesserungsfragen.", o: ["Wer ist verantwortlich?", "Was soll gemessen werden?", "Welche Software wird genutzt?", "Welche Hardware wird ersetzt?"], m: "CSI" }


];

/* --- LOGIC --- */
let activeSet = []; let retryStack = []; let currentIndex = 0; let streak = 0; let isExam = false; let examAnswers = {};

function shuffle(arr) { for(let i=arr.length-1; i>0; i--){ const j = Math.floor(Math.random()*(i+1)); [arr[i], arr[j]] = [arr[j], arr[i]]; } return arr; }

function initTrainer(filter) {
    isExam = false; document.getElementById('start-screen').classList.add('hidden'); document.getElementById('trainer-screen').classList.remove('hidden');
    activeSet = (filter === 'ALL') ? [...BANK] : BANK.filter(x => x.m === filter);
    shuffle(activeSet); currentIndex = 0; streak = 0; retryStack = []; updateStreak(); loadCard();
}

function initLearnMode() {
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('learn-screen').classList.remove('hidden');
    const container = document.getElementById('learn-list');
    container.innerHTML = '';
    BANK.forEach((item, idx) => {
        const div = document.createElement('div');
        div.className = 'exam-item';
        div.innerHTML = `
            <div class="q-meta">${item.m}</div>
            <div class="exam-q">${idx+1}. ${item.q}</div>
            <div class="learn-a">Antwort: ${item.a}</div>
            <div style="color:var(--muted); font-size:0.9rem; border-top:1px solid var(--border); padding-top:5px; margin-top:5px;">${item.e}</div>
        `;
        container.appendChild(div);
    });
}

function loadCard() {
    const nextBtn = document.getElementById('next-btn');
    nextBtn.style.display = 'none';
    if(currentIndex >= activeSet.length) {
        if(retryStack.length > 0) { alert(`${retryStack.length} Fehler werden wiederholt.`); activeSet = [...retryStack]; retryStack = []; currentIndex = 0; shuffle(activeSet); } 
        else { alert("Fertig!"); window.location.href='index.html'; return; }
    }
    const item = activeSet[currentIndex];
    document.getElementById('t-mod').innerText = item.m;
    document.getElementById('t-idx').innerText = `${currentIndex+1} / ${activeSet.length}`;
    document.getElementById('t-question').innerText = item.q;
    document.getElementById('t-progress').style.width = `${(currentIndex/activeSet.length)*100}%`;
    const c = document.getElementById('t-options');
    c.innerHTML = ''; c.classList.remove('locked');
    document.getElementById('t-expl').style.display = 'none';
    let opts = item.o.map(o => ({ txt:o, isCorrect: o===item.a }));
    shuffle(opts);
    opts.forEach((o, i) => {
        const btn = document.createElement('div');
        btn.className = 'opt-btn';
        btn.innerHTML = `<div style="background:rgba(0,0,0,0.3); width:28px; height:28px; display:flex; align-items:center; justify-content:center; border-radius:6px; margin-right:15px;">${i+1}</div> <div>${o.txt}</div>`;
        btn.onclick = () => checkTrainerAnswer(btn, o.isCorrect, item);
        c.appendChild(btn);
    });
}

function checkTrainerAnswer(btn, isCorrect, item) {
    if(btn.parentElement.classList.contains('locked')) return;
    btn.parentElement.classList.add('locked');
    const ex = document.getElementById('t-expl');
    ex.style.display = 'block';
    ex.className = 'expl-box ' + (isCorrect ? 'is-correct' : 'is-wrong');
    document.getElementById('t-expl-title').innerText = isCorrect ? "‚úì Korrekt" : "‚úó Falsch";
    document.getElementById('t-expl-text').innerText = item.e;
    if(navigator.vibrate) navigator.vibrate(isCorrect ? 50 : 200);
    if(isCorrect) { btn.classList.add('correct'); streak++; }
    else { btn.classList.add('wrong'); streak = 0; retryStack.push(item);
           Array.from(document.querySelectorAll('.opt-btn')).forEach(b => { if(b.innerText.includes(item.a)) b.classList.add('correct'); });
    }
    updateStreak();
    const nb = document.getElementById('next-btn'); nb.style.display = 'block';
    setTimeout(() => { nb.scrollIntoView({behavior: "smooth", block: "center"}); }, 100);
}

function nextCard() { currentIndex++; loadCard(); }
function updateStreak() { document.getElementById('t-streak').innerText = streak; }

function initExam() {
    isExam = true; document.getElementById('start-screen').classList.add('hidden'); document.getElementById('exam-screen').classList.remove('hidden');
    activeSet = shuffle([...BANK]).slice(0, 45);
    const container = document.getElementById('exam-list'); container.innerHTML = '';
    activeSet.forEach((item, idx) => {
        let opts = shuffle([...item.o]);
        const div = document.createElement('div'); div.className = 'exam-item';
        div.innerHTML = `<div class="exam-q">${idx+1}. ${item.q}</div>` + 
            opts.map(o => `<label class="exam-opt"><input type="radio" name="q${idx}" value="${o}" onchange="examAnswers[${idx}]='${o}'"> ${o}</label>`).join('');
        container.appendChild(div);
    });
}

function submitExam() {
    let score = 0; activeSet.forEach((item, idx) => { if(examAnswers[idx] === item.a) score++; });
    const perc = Math.round((score/activeSet.length)*100);
    const header = document.getElementById('exam-result-header');
    header.innerHTML = `<div style="background:var(--panel); padding:20px; border-radius:15px; text-align:center; margin-bottom:20px; border:1px solid var(--border)"><h2>${perc}%</h2><p>${score} von ${activeSet.length} richtig</p></div>`;
    header.classList.remove('hidden'); window.scrollTo(0,0);
}

const modules = [...new Set(BANK.map(x=>x.m))];
const modContainer = document.getElementById('module-list');
modules.forEach(m => {
    const btn = document.createElement('div'); btn.className = 'mode-card'; 
    btn.innerHTML = `<span style="font-weight:bold; font-size:0.9rem;">${m}</span>`;
    btn.onclick = () => initTrainer(m); modContainer.appendChild(btn);
});
</script>
<a href="index.html" class="btn btn-outline" style="position:fixed; right:16px; bottom:16px; z-index:999; background: var(--bg);">Zur√ºck</a>
</body>
</html>
